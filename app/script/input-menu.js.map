{"version":3,"sources":["input-menu.js"],"names":["electron","require","DOM_VK_A","DOM_VK_C","DOM_VK_V","DOM_VK_X","DOM_VK_Z","menuTemplate","label","role","type","window","debug","push","action","name","evt","win","remote","getCurrentWindow","webContents","preventDefault","isEditable","node","matches","handleInputShortcuts","c","keyCode","ctrlDown","ctrlKey","metaKey","altDown","altKey","shiftDown","shiftKey","target","registerShortcuts","document","body","addEventListener","inputMenu","ctx","next","elm","apply","menu","parentElement","module","exports"],"mappings":"AAAA,aAEA,KAAMA,UAAWC,QAAQ,UAAR,CAAjB,CAEMC,SAAW,EAFjB,CAGMC,SAAW,EAHjB,CAIMC,SAAW,EAJjB,CAKMC,SAAW,EALjB,CAMMC,WANN,CAQMC,aAAe,CAAC,CACrBC,MAAO,UADc,CAErBC,KAAM,MAFe,CAAD,CAGlB,CACFD,MAAO,SADL,CAEFC,KAAM,MAFJ,CAHkB,CAMlB,CACFC,KAAM,WADJ,CANkB,CAQlB,CACFF,MAAO,QADL,CAEFC,KAAM,KAFJ,CARkB,CAWlB,CACFD,MAAO,QADL,CAEFC,KAAM,MAFJ,CAXkB,CAclB,CACFD,MAAO,OADL,CAEFC,KAAM,OAFJ,CAdkB,CAiBlB,CACFC,KAAM,WADJ,CAjBkB,CAmBlB,CACFF,MAAO,kBADL,CAEFC,KAAM,WAFJ,CAnBkB,CARrB,CAgCIE,OAAOC,K,EACPL,aAAaM,IAAb,CAAkB,CAACH,KAAM,WAAP,CAAlB,C,CAEJ,QAASI,OAAT,CAAgBC,CAAhB,CAAsBC,CAAtB,CAA2B,CAC1B,KAAMC,GAAMjB,SAASkB,MAAT,CAAgBC,gBAAhB,EAAZ,CAGA,MAFAF,GAAIG,WAAJ,CAAgBL,CAAhB,GAEA,CADAC,EAAIK,cAAJ,EACA,GACA,CAED,QAASC,WAAT,CAAoBC,CAApB,CAA0B,CACzB,MAAOA,GAAKC,OAAL,CAAa,oCAAb,CACP,CAED,QAASC,qBAAT,CAA8BT,CAA9B,CAAmC,CAClC,KAAMU,GAAIV,EAAIW,OAAd,CACMC,EAAWZ,EAAIa,OAAJ,EAAeb,EAAIc,OADpC,CAEMC,EAAUf,EAAIgB,MAFpB,CAGMC,EAAYjB,EAAIkB,QAHtB,CADkC,QAM9BH,CAN8B,GAU7BT,WAAWN,EAAImB,MAAf,CAV6B,GAc9BP,GAAY,CAACK,CAAb,EAA0BP,IAAMvB,QAdF,CAe1BW,OAAO,MAAP,CAAeE,CAAf,CAf0B,CAkB9BY,GAAY,CAACK,CAAb,EAA0BP,IAAMtB,QAlBF,CAmB1BU,OAAO,OAAP,CAAgBE,CAAhB,CAnB0B,CAsB9BY,GAAY,CAACK,CAAb,EAA0BP,IAAMrB,QAtBF,CAuB1BS,OAAO,KAAP,CAAcE,CAAd,CAvB0B,CA0B9BY,GAAY,CAACK,CAAb,EAA0BP,IAAMxB,QA1BF,CA2B1BY,OAAO,WAAP,CAAoBE,CAApB,CA3B0B,CA8B9BY,GAAY,CAACK,CAAb,EAA0BP,IAAMpB,QA9BF,CA+B1BQ,OAAO,MAAP,CAAeE,CAAf,CA/B0B,CAkC9BY,GAAYK,CAAZ,EAAyBP,IAAMpB,QAlCD,CAmC1BQ,OAAO,MAAP,CAAeE,CAAf,CAnC0B,IAuClC,CAED,QAASoB,kBAAT,EAA6B,CACxBC,SAASC,IADe,CAE3BD,SAASC,IAAT,CAAcC,gBAAd,CAA+B,SAA/B,CAA0Cd,oBAA1C,CAF2B,CAI3BY,SAASE,gBAAT,CAA0B,kBAA1B,CAA8C,IAAM,CACnDF,SAASC,IAAT,CAAcC,gBAAd,CAA+B,SAA/B,CAA0Cd,oBAA1C,CACA,CAFD,CAID,CAED,QAASe,UAAT,CAAmBC,CAAnB,CAAwBC,CAAxB,CAA8B,KAC7B,GAAInB,GAAOkB,EAAIE,GADc,CAGtBpB,CAHsB,EAGhB,CACZ,GAAID,WAAWC,CAAX,CAAJ,CAAsB,CACrB,GAAGV,IAAH,CAAQ+B,KAAR,CAAcH,EAAII,IAAlB,CAAwBtC,YAAxB,CADqB,CAErB,KACA,CACDgB,EAAOA,EAAKuB,aACZ,CACDJ,GACA,CAEDF,UAAUJ,iBAAV,CAA8BA,iB,CAE9BW,OAAOC,OAAP,CAAiBR,S","file":"input-menu.js","sourcesContent":["'use strict';\n\nconst electron = require('electron');\n\nconst DOM_VK_A = 0x41; // (65) \"A\" key.\nconst DOM_VK_C = 0x43; // (67) \"C\" key.\nconst DOM_VK_V = 0x56; // (86) \"V\" key.\nconst DOM_VK_X = 0x58; // (88) \"X\" key.\nconst DOM_VK_Z = 0x5A; // (90) \"Z\" key.\n\nconst menuTemplate = [{\n\tlabel: 'Deshacer',\n\trole: 'undo'\n}, {\n\tlabel: 'Rehacer',\n\trole: 'redo'\n}, {\n\ttype: 'separator'\n}, {\n\tlabel: 'Cortar',\n\trole: 'cut'\n}, {\n\tlabel: 'Copiar',\n\trole: 'copy'\n}, {\n\tlabel: 'Pegar',\n\trole: 'paste'\n}, {\n\ttype: 'separator'\n}, {\n\tlabel: 'Seleccionar Todo',\n\trole: 'selectall'\n}];\n\nif (window.debug)\n    menuTemplate.push({type: 'separator'});\n\nfunction action(name, evt) {\n\tconst win = electron.remote.getCurrentWindow();\n\twin.webContents[name]();\n\tevt.preventDefault();\n\treturn false;\n}\n\nfunction isEditable(node) {\n\treturn node.matches('input, textarea, [contenteditable]');\n}\n\nfunction handleInputShortcuts(evt) {\n\tconst c = evt.keyCode;\n\tconst ctrlDown = evt.ctrlKey || evt.metaKey; // OSX support\n\tconst altDown = evt.altKey;\n\tconst shiftDown = evt.shiftKey;\n\n\tif (altDown) {\n\t\treturn true;\n\t}\n\n\tif (!isEditable(evt.target)) {\n\t\treturn true;\n\t}\n\n\tif (ctrlDown && !shiftDown && c === DOM_VK_C) {\n\t\treturn action('copy', evt);\n\t}\n\n\tif (ctrlDown && !shiftDown && c === DOM_VK_V) {\n\t\treturn action('paste', evt);\n\t}\n\n\tif (ctrlDown && !shiftDown && c === DOM_VK_X) {\n\t\treturn action('cut', evt);\n\t}\n\n\tif (ctrlDown && !shiftDown && c === DOM_VK_A) {\n\t\treturn action('selectAll', evt);\n\t}\n\n\tif (ctrlDown && !shiftDown && c === DOM_VK_Z) {\n\t\treturn action('undo', evt);\n\t}\n\n\tif (ctrlDown && shiftDown && c === DOM_VK_Z) {\n\t\treturn action('redo', evt);\n\t}\n\n\treturn true;\n}\n\nfunction registerShortcuts() {\n\tif (document.body) {\n\t\tdocument.body.addEventListener('keydown', handleInputShortcuts);\n\t} else {\n\t\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\t\tdocument.body.addEventListener('keydown', handleInputShortcuts);\n\t\t});\n\t}\n}\n\nfunction inputMenu(ctx, next) {\n\tlet node = ctx.elm;\n\n\twhile (node) {\n\t\tif (isEditable(node)) {\n\t\t\t[].push.apply(ctx.menu, menuTemplate);\n\t\t\tbreak;\n\t\t}\n\t\tnode = node.parentElement;\n\t}\n\tnext();\n}\n\ninputMenu.registerShortcuts = registerShortcuts;\n\nmodule.exports = inputMenu;\n"]}