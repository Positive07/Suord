'use strict';const CoMws=require('./comws.js');let context=new CoMws;function run(a,b){const c=[];return context.run({menu:c,elm:a,click:b}).then(()=>c)}function onContextmenu(a){const b=require('electron'),c=b.remote,d=c.Menu,f={x:a.x,y:a.y},g=a.target;run(g,f).then(h=>{if(0<h.length){a.preventDefault(),a.stopPropagation();const i=d.buildFromTemplate(h);i.popup(c.getCurrentWindow(),f.x,f.y)}}).catch(h=>process.stderr.write(h.stack+'\n'))}exports.reset=function(){context=new CoMws},exports.use=function(b){if('function'!=typeof b)throw new Error('Function middleware argument required.');return context.use(b),b},exports.activate=function(){document.body?document.body.addEventListener('contextmenu',onContextmenu):document.addEventListener('DOMContentLoaded',()=>{document.body.addEventListener('contextmenu',onContextmenu)})},exports.__test={run};
//# sourceMappingURL=context-menu.js.map
